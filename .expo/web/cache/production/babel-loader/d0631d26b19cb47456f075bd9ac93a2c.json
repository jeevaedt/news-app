{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");var _interopRequireWildcard=require(\"@babel/runtime/helpers/interopRequireWildcard\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _objectWithoutProperties2=_interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));var _react=_interopRequireWildcard(require(\"react\"));var _Modal=require(\"../../composites/Modal\");var _hooks=require(\"../../../hooks\");var _reactNative=require(\"react-native-web/dist/index\");var _Context=require(\"../Modal/Context\");var _Box=_interopRequireDefault(require(\"../../primitives/Box\"));var _this=this,_jsxFileName=\"/Users/adityajamuar/Sites/projects/nativebase/NativeBase/src/components/composites/Actionsheet/ActionsheetContent.tsx\";var ActionsheetContent=function ActionsheetContent(_ref,ref){var children=_ref.children,props=(0,_objectWithoutProperties2.default)(_ref,[\"children\"]);var newProps=(0,_hooks.usePropsResolution)('ActionsheetContent',props);var _React$useContext=_react.default.useContext(_Context.ModalContext),handleClose=_React$useContext.handleClose;var pan=_react.default.useRef(new _reactNative.Animated.ValueXY()).current;var sheetHeight=_react.default.useRef(0);var panResponder=_react.default.useRef(_reactNative.PanResponder.create({onStartShouldSetPanResponder:function onStartShouldSetPanResponder(){return true;},onMoveShouldSetPanResponder:function onMoveShouldSetPanResponder(_evt,gestureState){return gestureState.dy>15;},onPanResponderMove:function onPanResponderMove(e,gestureState){if(gestureState.dy>0){_reactNative.Animated.event([null,{dy:pan.y}],{useNativeDriver:false})(e,gestureState);}},onPanResponderRelease:function onPanResponderRelease(_e,gestureState){if(sheetHeight.current/4-gestureState.dy<0){_reactNative.Animated.timing(pan,{toValue:{x:0,y:sheetHeight.current},duration:150,useNativeDriver:true}).start(handleClose);}else{_reactNative.Animated.spring(pan,{toValue:{x:0,y:0},overshootClamping:true,useNativeDriver:true}).start();}}})).current;return _react.default.createElement(_reactNative.Animated.View,{style:{transform:[{translateY:pan.y}],width:'100%'},onLayout:function onLayout(event){var height=event.nativeEvent.layout.height;sheetHeight.current=height;},pointerEvents:\"box-none\",__self:_this,__source:{fileName:_jsxFileName,lineNumber:51,columnNumber:5}},_react.default.createElement(_Box.default,(0,_extends2.default)({py:5},panResponder.panHandlers,{collapsable:false,__self:_this,__source:{fileName:_jsxFileName,lineNumber:63,columnNumber:7}})),_react.default.createElement(_Modal.Modal.Content,(0,_extends2.default)({},newProps,{ref:ref,safeAreaBottom:true,__self:_this,__source:{fileName:_jsxFileName,lineNumber:65,columnNumber:7}}),_react.default.createElement(_Box.default,(0,_extends2.default)({py:5,mt:-2},panResponder.panHandlers,{width:\"100%\",alignItems:\"center\",collapsable:false,__self:_this,__source:{fileName:_jsxFileName,lineNumber:67,columnNumber:9}}),_react.default.createElement(_Box.default,{bg:\"coolGray.400\",height:1,width:9,borderRadius:2,__self:_this,__source:{fileName:_jsxFileName,lineNumber:75,columnNumber:11}})),children));};var _default=(0,_react.memo)((0,_react.forwardRef)(ActionsheetContent));exports.default=_default;","map":{"version":3,"sources":["ActionsheetContent.tsx"],"names":["ActionsheetContent","children","props","newProps","handleClose","React","ModalContext","pan","Animated","sheetHeight","panResponder","PanResponder","onStartShouldSetPanResponder","onMoveShouldSetPanResponder","gestureState","onPanResponderMove","dy","useNativeDriver","onPanResponderRelease","toValue","x","y","duration","overshootClamping","transform","translateY","width","height","event"],"mappings":"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","sourcesContent":["import React, { memo, forwardRef } from 'react';\nimport { Modal } from '../../composites/Modal';\nimport type { IActionsheetContentProps } from './types';\nimport { usePropsResolution } from '../../../hooks';\nimport { Animated, PanResponder } from 'react-native';\nimport { ModalContext } from '../Modal/Context';\nimport Box from '../../primitives/Box';\n\nconst ActionsheetContent = (\n  { children, ...props }: IActionsheetContentProps,\n  ref?: any\n) => {\n  const newProps = usePropsResolution('ActionsheetContent', props);\n  const { handleClose } = React.useContext(ModalContext);\n  let pan = React.useRef(new Animated.ValueXY()).current;\n  let sheetHeight = React.useRef(0);\n\n  const panResponder = React.useRef(\n    PanResponder.create({\n      onStartShouldSetPanResponder: () => true,\n      onMoveShouldSetPanResponder: (_evt, gestureState) => {\n        return gestureState.dy > 15;\n      },\n      onPanResponderMove: (e, gestureState) => {\n        if (gestureState.dy > 0) {\n          Animated.event([null, { dy: pan.y }], {\n            useNativeDriver: false,\n          })(e, gestureState);\n        }\n      },\n      onPanResponderRelease: (_e, gestureState) => {\n        // If sheet is dragged 1/4th of it's height, close it\n        if (sheetHeight.current / 4 - gestureState.dy < 0) {\n          Animated.timing(pan, {\n            toValue: { x: 0, y: sheetHeight.current },\n            duration: 150,\n            useNativeDriver: true,\n          }).start(handleClose);\n        } else {\n          Animated.spring(pan, {\n            toValue: { x: 0, y: 0 },\n            overshootClamping: true,\n            useNativeDriver: true,\n          }).start();\n        }\n      },\n    })\n  ).current;\n\n  return (\n    <Animated.View\n      style={{\n        transform: [{ translateY: pan.y }],\n        width: '100%',\n      }}\n      onLayout={(event) => {\n        const { height } = event.nativeEvent.layout;\n        sheetHeight.current = height;\n      }}\n      pointerEvents=\"box-none\"\n    >\n      {/* To increase the draggable area */}\n      <Box py={5} {...panResponder.panHandlers} collapsable={false} />\n\n      <Modal.Content {...newProps} ref={ref} safeAreaBottom>\n        {/* Hack. Fix later. Add -2 negative margin to remove the padding added by ActionSheetContent */}\n        <Box\n          py={5}\n          mt={-2}\n          {...panResponder.panHandlers}\n          width=\"100%\"\n          alignItems=\"center\"\n          collapsable={false}\n        >\n          <Box bg=\"coolGray.400\" height={1} width={9} borderRadius={2} />\n        </Box>\n        {children}\n      </Modal.Content>\n    </Animated.View>\n  );\n};\n\nexport default memo(forwardRef(ActionsheetContent));\n"]},"metadata":{},"sourceType":"script"}